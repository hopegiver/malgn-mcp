{
  "type": "jsp-modify",
  "title": "수정 페이지 (JSP)",
  "variables": {
    "TABLE_NAME": { "description": "테이블명", "example": "tb_board" },
    "DAO_CLASS": { "description": "DAO 클래스명", "example": "BoardDao" },
    "DAO_VAR": { "description": "DAO 변수명", "example": "board" }
  },
  "jsp_template": "<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\n// 로그인 체크\nif(!isLogin) {\n    m.redirect(\"/member/login.jsp\");\n    return;\n}\n\nint id = m.ri(\"id\");\n\n{DAO_CLASS} {DAO_VAR} = new {DAO_CLASS}();\nDataSet info = {DAO_VAR}.find(\"id = ?\", new Object[]{id});\n\nif(!info.next()) {\n    m.jsError(\"데이터를 찾을 수 없습니다.\");\n    return;\n}\n\n// 작성자 본인 확인\nif(info.i(\"user_id\") != userId) {\n    m.jsError(\"수정 권한이 없습니다.\");\n    return;\n}\n\n// 유효성 검증 규칙 설정 (기존값을 기본값으로)\nf.addElement(\"title\", info.s(\"title\"), \"required:'Y', minlength:2\");\nf.addElement(\"content\", info.s(\"content\"), \"required:'Y', minlength:10\");\n\n// POST 처리 (수정)\nif(m.isPost() && f.validate()) {\n    {DAO_VAR}.item(\"title\", f.get(\"title\"));\n    {DAO_VAR}.item(\"content\", f.get(\"content\"));\n    {DAO_VAR}.item(\"mod_date\", m.time());\n\n    if({DAO_VAR}.update(\"id = ?\", new Object[]{id})) {\n        j.put(\"{DAO_VAR}_id\", id);\n        j.success(\"수정되었습니다.\");\n    } else {\n        j.error(\"수정 실패: \" + {DAO_VAR}.getErrMsg());\n    }\n    return;\n}\n\n// GET 처리 (폼 표시)\np.setLayout(\"main\");\np.setBody(\"board.modify\");\np.setVar(\"title\", \"수정\");\np.setVar(\"{DAO_VAR}_id\", id);\np.setVar(\"form_script\", f.getScript());\np.display();\n\n%>",
  "html_template": "<div class=\"row justify-content-center\">\n    <div class=\"col-md-10\">\n        <div class=\"card shadow\">\n            <div class=\"card-body p-4\">\n                <h2 class=\"mb-4\">{{title}}</h2>\n                <form name=\"form1\" method=\"post\" data-ajax=\"true\" data-redirect=\"view.jsp?id={{board_id}}\">\n                    <div class=\"mb-3\">\n                        <label class=\"form-label\">제목 <span class=\"text-danger\">*</span></label>\n                        <input type=\"text\" class=\"form-control\" name=\"title\" placeholder=\"제목을 입력하세요\">\n                    </div>\n                    <div class=\"mb-4\">\n                        <label class=\"form-label\">내용 <span class=\"text-danger\">*</span></label>\n                        <textarea class=\"form-control\" name=\"content\" rows=\"15\" placeholder=\"내용을 입력하세요\"></textarea>\n                    </div>\n                    <div class=\"d-flex gap-2\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-lg\">수정하기</button>\n                        <a href=\"list.jsp\" class=\"btn btn-outline-secondary btn-lg\">목록</a>\n                        <a href=\"view.jsp?id={{board_id}}\" class=\"btn btn-outline-secondary btn-lg\">취소</a>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>\n{{form_script}}",
  "notes": [
    "GET: 기존 데이터 조회 → addElement 기본값에 info.s() 설정",
    "POST: 검증 → 수정 → j.success() 응답",
    "update()에 바인딩 파라미터 사용 (WHERE 접두사 없음)",
    "작성자 본인 확인: info.i(\"user_id\") != userId",
    "data-redirect로 수정 후 상세 페이지로 이동"
  ]
}
