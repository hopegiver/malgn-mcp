{
  "slug": "http-client",
  "title": "HTTP 클라이언트",
  "category": "web",
  "content": "# HTTP 클라이언트\n\n[← 목차로 돌아가기](README.md)\n\n---\n\n## Http 클래스 개요\n\nHttp 클래스는 외부 API를 호출하거나 HTTP 요청을 보내기 위한 클라이언트 클래스입니다.\n\n### 주요 기능\n\n- GET, POST, PUT, DELETE 요청\n- 헤더 설정\n- 파라미터 전송\n- JSON/XML 데이터 전송\n- SSL 인증서 검증 비활성화\n- 타임아웃 설정\n- 비동기 요청 지원\n\n---\n\n## 기본 사용법\n\n### GET 요청\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nHttp http = new Http(\"https://api.example.com/users\");\nhttp.setParam(\"page\", \"1\");\nhttp.setParam(\"limit\", \"10\");\n\nString response = http.send(\"GET\");\nm.p(response);\n\n%>\n```\n\n### POST 요청\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nHttp http = new Http(\"https://api.example.com/users\");\nhttp.setParam(\"name\", \"홍길동\");\nhttp.setParam(\"email\", \"hong@example.com\");\nhttp.setParam(\"age\", \"30\");\n\nString response = http.send(\"POST\");\nm.p(response);\n\n%>\n```\n\n---\n\n## 헤더 설정\n\n### 커스텀 헤더 추가\n\n```jsp\nHttp http = new Http(\"https://api.example.com/data\");\n\n// Authorization 헤더\nhttp.setHeader(\"Authorization\", \"Bearer \" + apiToken);\n\n// Content-Type 헤더\nhttp.setHeader(\"Content-Type\", \"application/json\");\n\n// 커스텀 헤더\nhttp.setHeader(\"X-API-Key\", \"your_api_key\");\nhttp.setHeader(\"X-Request-ID\", Malgn.uuid());\n\nString response = http.send(\"GET\");\n```\n\n---\n\n## JSON 데이터 전송\n\n### JSON 요청\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nHttp http = new Http(\"https://api.example.com/users\");\n\n// JSON 데이터 생성\nJSONObject json = new JSONObject();\njson.put(\"name\", \"홍길동\");\njson.put(\"email\", \"hong@example.com\");\njson.put(\"age\", 30);\n\n// JSON 데이터 설정 (자동으로 Content-Type: application/json 설정됨)\nhttp.setData(json.toString());\n\nString response = http.send(\"POST\");\nm.p(response);\n\n%>\n```\n\n### JSON 응답 파싱\n\n```jsp\nHttp http = new Http(\"https://api.example.com/users/123\");\nString response = http.send(\"GET\");\n\n// JSON 파싱\nJSONObject json = new JSONObject(response);\nString name = json.getString(\"name\");\nString email = json.getString(\"email\");\nint age = json.getInt(\"age\");\n\nm.p(\"이름: \" + name);\nm.p(\"이메일: \" + email);\nm.p(\"나이: \" + age);\n```\n\n---\n\n## XML 데이터 전송\n\n```jsp\nHttp http = new Http(\"https://api.example.com/data\");\n\nString xmlData = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\" +\n                \"<user>\" +\n                \"  <name>홍길동</name>\" +\n                \"  <email>hong@example.com</email>\" +\n                \"</user>\";\n\n// XML 데이터 설정 (자동으로 Content-Type: application/xml 설정됨)\nhttp.setData(xmlData);\n\nString response = http.send(\"POST\");\n```\n\n---\n\n## 타임아웃 설정\n\n```jsp\nHttp http = new Http(\"https://api.example.com/slow-endpoint\");\n\n// 타임아웃 설정 (초 단위)\nhttp.setTimeout(30);  // 30초\n\ntry {\n    String response = http.send(\"GET\");\n    m.p(response);\n} catch(Exception e) {\n    m.p(\"요청 시간 초과\");\n}\n```\n\n---\n\n## SSL 인증서 검증\n\n### SSL 검증 비활성화 (개발 환경)\n\n```jsp\nHttp http = new Http(\"https://self-signed-cert.example.com\");\n\n// SSL 인증서 검증 비활성화\nhttp.disableSSLVerification();\n\nString response = http.send(\"GET\");\n\n// 검증 복원\nhttp.restoreSSLVerification();\n```\n\n**주의**: 운영 환경에서는 SSL 검증을 비활성화하지 마세요!\n\n---\n\n## 응답 코드 확인\n\n```jsp\nHttp http = new Http(\"https://api.example.com/users\");\nString response = http.send(\"GET\");\n\nint statusCode = http.getResponseCode();\n\nif(statusCode == 200) {\n    m.p(\"성공: \" + response);\n} else if(statusCode == 404) {\n    m.p(\"리소스를 찾을 수 없습니다\");\n} else if(statusCode >= 500) {\n    m.p(\"서버 오류\");\n} else {\n    m.p(\"오류 코드: \" + statusCode);\n}\n```\n\n---\n\n## 비동기 요청\n\n```jsp\nHttp http = new Http(\"https://api.example.com/process\");\nhttp.setParam(\"task\", \"heavy_task\");\n\n// 비동기 요청 (백그라운드에서 실행)\nhttp.send(\"POST\", new HttpListener() {\n    @Override\n    public void execute(String result) {\n        // 요청 완료 후 실행\n        Malgn.logger(\"http\", \"완료: \" + result);\n    }\n});\n\n// 즉시 다음 코드 실행\nm.p(\"요청이 백그라운드에서 실행 중입니다\");\n```\n\n---\n\n## 실전 예제\n\n### 1. REST API 호출\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\n// GitHub API 호출\nHttp http = new Http(\"https://api.github.com/users/octocat\");\nhttp.setHeader(\"User-Agent\", \"MalgnFramework\");\n\nString response = http.send(\"GET\");\n\nJSONObject user = new JSONObject(response);\nm.p(\"사용자명: \" + user.getString(\"login\"));\nm.p(\"이름: \" + user.getString(\"name\"));\nm.p(\"팔로워: \" + user.getInt(\"followers\"));\n\n%>\n```\n\n### 2. 날씨 API 호출\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nString apiKey = Config.get(\"weatherApiKey\");\nString city = \"Seoul\";\n\nHttp http = new Http(\"https://api.openweathermap.org/data/2.5/weather\");\nhttp.setParam(\"q\", city);\nhttp.setParam(\"appid\", apiKey);\nhttp.setParam(\"units\", \"metric\");\n\nString response = http.send(\"GET\");\n\nJSONObject weather = new JSONObject(response);\ndouble temp = weather.getJSONObject(\"main\").getDouble(\"temp\");\nString description = weather.getJSONArray(\"weather\").getJSONObject(0).getString(\"description\");\n\nm.p(\"서울 날씨: \" + description);\nm.p(\"온도: \" + temp + \"°C\");\n\n%>\n```\n\n### 3. 슬랙(Slack) 웹훅\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nString webhookUrl = Config.get(\"slackWebhookUrl\");\n\nJSONObject payload = new JSONObject();\npayload.put(\"text\", \"새로운 주문이 접수되었습니다!\");\npayload.put(\"username\", \"알림봇\");\npayload.put(\"icon_emoji\", \":bell:\");\n\nHttp http = new Http(webhookUrl);\nhttp.setData(payload.toString());\n\nString response = http.send(\"POST\");\nm.p(\"슬랙 전송: \" + response);\n\n%>\n```\n\n### 4. 결제 API 연동\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nString apiUrl = \"https://api.payment.com/v1/payments\";\nString apiKey = Config.get(\"paymentApiKey\");\n\n// 결제 요청 데이터\nJSONObject payment = new JSONObject();\npayment.put(\"amount\", 50000);\npayment.put(\"currency\", \"KRW\");\npayment.put(\"order_id\", \"ORD\" + m.time());\npayment.put(\"customer_name\", \"홍길동\");\npayment.put(\"customer_email\", \"hong@example.com\");\n\nHttp http = new Http(apiUrl);\nhttp.setHeader(\"Authorization\", \"Bearer \" + apiKey);\nhttp.setData(payment.toString());\n\nString response = http.send(\"POST\");\n\nJSONObject result = new JSONObject(response);\nif(\"success\".equals(result.getString(\"status\"))) {\n    String paymentId = result.getString(\"payment_id\");\n    m.p(\"결제 성공: \" + paymentId);\n} else {\n    m.p(\"결제 실패: \" + result.getString(\"message\"));\n}\n\n%>\n```\n\n### 5. 파일 다운로드\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nHttp http = new Http(\"https://example.com/files/document.pdf\");\nString content = http.send(\"GET\");\n\n// 파일로 저장\nString filePath = Config.getDataDir() + \"/downloaded_document.pdf\";\nMalgn.writeFile(filePath, content);\n\nm.p(\"파일 다운로드 완료: \" + filePath);\n\n%>\n```\n\n### 6. POST with Form Data\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nHttp http = new Http(\"https://api.example.com/form\");\nhttp.setHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\nhttp.setParam(\"username\", \"hong\");\nhttp.setParam(\"password\", \"secret123\");\nhttp.setParam(\"remember\", \"true\");\n\nString response = http.send(\"POST\");\nm.p(response);\n\n%>\n```\n\n### 7. PUT 요청 (업데이트)\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nint userId = 123;\n\nJSONObject updateData = new JSONObject();\nupdateData.put(\"name\", \"김철수\");\nupdateData.put(\"email\", \"kim@example.com\");\n\nHttp http = new Http(\"https://api.example.com/users/\" + userId);\nhttp.setHeader(\"Authorization\", \"Bearer \" + apiToken);\nhttp.setData(updateData.toString());\n\nString response = http.send(\"PUT\");\nm.p(\"업데이트 완료: \" + response);\n\n%>\n```\n\n### 8. DELETE 요청\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nint userId = 123;\n\nHttp http = new Http(\"https://api.example.com/users/\" + userId);\nhttp.setHeader(\"Authorization\", \"Bearer \" + apiToken);\n\nString response = http.send(\"DELETE\");\n\nif(http.getResponseCode() == 204) {\n    m.p(\"삭제 성공\");\n} else {\n    m.p(\"삭제 실패: \" + response);\n}\n\n%>\n```\n\n---\n\n## 디버깅\n\n```jsp\nHttp http = new Http(\"https://api.example.com/data\");\nhttp.setDebug(out);  // 디버그 정보 출력\n\nhttp.setHeader(\"X-API-Key\", \"test123\");\nhttp.setParam(\"query\", \"search_term\");\n\nString response = http.send(\"GET\");\n```\n\n**디버그 출력 내용**:\n- 요청 URL\n- 요청 헤더\n- 요청 파라미터\n- 응답 코드\n- 응답 내용\n\n---\n\n## 주요 메소드 정리\n\n| 메소드 | 설명 |\n|--------|------|\n| Http(url) | HTTP 클라이언트 생성 |\n| setUrl(url) | URL 설정 |\n| setHeader(key, value) | 헤더 추가 |\n| setParam(name, value) | 파라미터 추가 |\n| setData(data) | Body 데이터 설정 (JSON/XML) |\n| setTimeout(seconds) | 타임아웃 설정 (초) |\n| send() | GET 요청 실행 |\n| send(method) | 지정한 메소드로 요청 실행 |\n| send(method, listener) | 비동기 요청 실행 |\n| getResponseCode() | HTTP 응답 코드 |\n| disableSSLVerification() | SSL 검증 비활성화 |\n| restoreSSLVerification() | SSL 검증 복원 |\n| setDebug(out) | 디버깅 모드 |\n\n---\n\n## 베스트 프랙티스\n\n### 1. API 키는 설정 파일에\n\n```jsp\n// Bad\nString apiKey = \"sk-1234567890abcdef\";\n\n// Good\nString apiKey = Config.get(\"apiKey\");\n```\n\n### 2. 에러 처리\n\n```jsp\ntry {\n    Http http = new Http(apiUrl);\n    http.setTimeout(10);\n    String response = http.send(\"GET\");\n\n    int statusCode = http.getResponseCode();\n    if(statusCode >= 400) {\n        throw new Exception(\"API 오류: \" + statusCode);\n    }\n\n    // 처리...\n\n} catch(Exception e) {\n    Malgn.errorLog(\"API 호출 실패\", e);\n    m.jsError(\"일시적인 오류가 발생했습니다\");\n}\n```\n\n### 3. 타임아웃 설정\n\n```jsp\n// 외부 API는 항상 타임아웃 설정\nHttp http = new Http(externalApi);\nhttp.setTimeout(30);  // 30초\n```\n\n### 4. 응답 캐싱\n\n```jsp\nCache cache = new Cache();\nString cacheKey = \"api_data_\" + param;\nString response = cache.getString(cacheKey);\n\nif(response == null) {\n    Http http = new Http(apiUrl);\n    response = http.send(\"GET\");\n    cache.save(cacheKey, response);\n}\n```\n\n---\n\n[← 목차로 돌아가기](README.md)",
  "sections": [
    { "heading": "Http 클래스 개요", "content": "Http 클래스는 외부 API를 호출하거나 HTTP 요청을 보내기 위한 클라이언트 클래스입니다. GET, POST, PUT, DELETE 요청, 헤더 설정, JSON/XML 데이터 전송, SSL 검증, 타임아웃, 비동기 요청을 지원합니다." },
    { "heading": "기본 사용법", "content": "GET 및 POST 요청의 기본 사용법입니다. Http 객체를 생성하고 setParam으로 파라미터를 설정한 후 send 메소드로 요청을 실행합니다." },
    { "heading": "헤더 설정", "content": "setHeader 메소드로 Authorization, Content-Type, 커스텀 헤더를 추가할 수 있습니다." },
    { "heading": "JSON 데이터 전송", "content": "setData 메소드로 JSON 데이터를 전송하며, 자동으로 Content-Type: application/json이 설정됩니다." },
    { "heading": "XML 데이터 전송", "content": "setData 메소드로 XML 데이터를 전송하며, 자동으로 Content-Type: application/xml이 설정됩니다." },
    { "heading": "타임아웃 설정", "content": "setTimeout 메소드로 초 단위 타임아웃을 설정할 수 있습니다." },
    { "heading": "SSL 인증서 검증", "content": "disableSSLVerification으로 SSL 검증을 비활성화하고 restoreSSLVerification으로 복원할 수 있습니다." },
    { "heading": "응답 코드 확인", "content": "getResponseCode 메소드로 HTTP 응답 코드를 확인할 수 있습니다." },
    { "heading": "비동기 요청", "content": "HttpListener를 사용한 비동기 요청으로 백그라운드에서 실행할 수 있습니다." },
    { "heading": "실전 예제", "content": "REST API 호출, 날씨 API, 슬랙 웹훅, 결제 API 연동, 파일 다운로드, Form Data POST, PUT/DELETE 요청 등의 실전 예제입니다." },
    { "heading": "디버깅", "content": "setDebug(out)으로 요청 URL, 헤더, 파라미터, 응답 코드, 응답 내용 등의 디버그 정보를 출력할 수 있습니다." },
    { "heading": "주요 메소드 정리", "content": "Http 클래스의 모든 주요 메소드를 정리한 표입니다." },
    { "heading": "베스트 프랙티스", "content": "API 키는 설정 파일에 저장, 에러 처리, 타임아웃 설정, 응답 캐싱 등의 베스트 프랙티스입니다." }
  ],
  "related_docs": ["restapi", "openai", "oauth"],
  "related_classes": ["Http", "Malgn"]
}
