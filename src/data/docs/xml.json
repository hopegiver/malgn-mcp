{
  "slug": "xml",
  "title": "9. XML \ucc98\ub9ac",
  "category": "web",
  "content": "# 9. XML \ucc98\ub9ac\n\n[\u2190 \ubaa9\ucc28\ub85c \ub3cc\uc544\uac00\uae30](README.md)\n\n---\n\n## SimpleParser \ud074\ub798\uc2a4\n\nMalgnFramework\ub294 XML \ud30c\uc2f1\uc744 \uc704\ud55c SimpleParser \ud074\ub798\uc2a4\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.\n\n### \uc8fc\uc694 \uae30\ub2a5\n\n- XML \ud30c\uc77c \ud30c\uc2f1\n- XPath\ub97c \uc0ac\uc6a9\ud55c \ub178\ub4dc \uac80\uc0c9\n- \ub2e8\uc77c \uac12 \ucd94\ucd9c\n- \uc5ec\ub7ec \ub178\ub4dc\ub97c DataSet\uc73c\ub85c \ubcc0\ud658\n- \uac04\ud3b8\ud55c API\n\n---\n\n## \uae30\ubcf8 \uc0ac\uc6a9\ubc95\n\n### 1. XML \ud30c\uc77c \ub85c\ub4dc\n\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/sample.xml\");\n\n%>\n```\n\n### 2. \ub178\ub4dc \uac12 \uac00\uc838\uc624\uae30\n\n```jsp\n// XPath\ub85c \ub2e8\uc77c \uac12 \ucd94\ucd9c\nString logDir = xml.getNodeValue(\"//config/env/logDir\");\nm.p(logDir);\n```\n\n### 3. \uc5ec\ub7ec \ub178\ub4dc\ub97c DataSet\uc73c\ub85c\n\n```jsp\n// XPath\ub85c \uc5ec\ub7ec \ub178\ub4dc \ucd94\ucd9c\nDataSet users = xml.getDataSet(\"//config/users/user\");\n\nwhile(users.next()) {\n    m.p(users.getString(\"id\"));\n    m.p(users.getString(\"name\"));\n    m.p(users.getString(\"email\"));\n}\n```\n\n---\n\n## XML \ud30c\uc77c \uc608\uc81c\n\n### sample.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<config>\n    <env>\n        <logDir>/var/log/app</logDir>\n        <dataDir>/var/data</dataDir>\n        <uploadDir>/var/upload</uploadDir>\n    </env>\n\n    <users>\n        <user>\n            <id>user001</id>\n            <name>\ud64d\uae38\ub3d9</name>\n            <email>hong@example.com</email>\n            <role>admin</role>\n        </user>\n        <user>\n            <id>user002</id>\n            <name>\uae40\ucca0\uc218</name>\n            <email>kim@example.com</email>\n            <role>user</role>\n        </user>\n        <user>\n            <id>user003</id>\n            <name>\uc774\uc601\ud76c</name>\n            <email>lee@example.com</email>\n            <role>user</role>\n        </user>\n    </users>\n\n    <settings>\n        <maxUploadSize>10485760</maxUploadSize>\n        <sessionTimeout>3600</sessionTimeout>\n        <debugMode>true</debugMode>\n    </settings>\n</config>\n```\n\n---\n\n## \uc8fc\uc694 \uba54\uc18c\ub4dc\n\n### getNodeValue()\n\n\ub2e8\uc77c \ub178\ub4dc\uc758 \uac12\uc744 \uac00\uc838\uc635\ub2c8\ub2e4.\n\n```jsp\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/sample.xml\");\n\n// \ub2e8\uc77c \uac12 \ucd94\ucd9c\nString logDir = xml.getNodeValue(\"//config/env/logDir\");\nm.p(logDir);  // \"/var/log/app\"\n\nString dataDir = xml.getNodeValue(\"//config/env/dataDir\");\nm.p(dataDir);  // \"/var/data\"\n\nString maxSize = xml.getNodeValue(\"//config/settings/maxUploadSize\");\nm.p(maxSize);  // \"10485760\"\n```\n\n### getDataSet()\n\n\uc5ec\ub7ec \ub178\ub4dc\ub97c DataSet\uc73c\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4.\n\n```jsp\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/sample.xml\");\n\n// \uc5ec\ub7ec user \ub178\ub4dc\ub97c DataSet\uc73c\ub85c\nDataSet users = xml.getDataSet(\"//config/users/user\");\n\nm.p(\"\ucd1d \" + users.size() + \"\uba85\uc758 \uc0ac\uc6a9\uc790\");\n\nwhile(users.next()) {\n    String id = users.getString(\"id\");\n    String name = users.getString(\"name\");\n    String email = users.getString(\"email\");\n    String role = users.getString(\"role\");\n\n    m.p(id + \" - \" + name + \" (\" + email + \") - \" + role);\n}\n```\n\n**\ucd9c\ub825**:\n```\n\ucd1d 3\uba85\uc758 \uc0ac\uc6a9\uc790\nuser001 - \ud64d\uae38\ub3d9 (hong@example.com) - admin\nuser002 - \uae40\ucca0\uc218 (kim@example.com) - user\nuser003 - \uc774\uc601\ud76c (lee@example.com) - user\n```\n\n---\n\n## XPath \ud45c\ud604\uc2dd\n\n### \uae30\ubcf8 \ud45c\ud604\uc2dd\n\n```jsp\n// \ub8e8\ud2b8\ubd80\ud130 \uc808\ub300 \uacbd\ub85c\nxml.getNodeValue(\"/config/env/logDir\");\n\n// \uc5b4\ub514\uc11c\ub4e0 \ucc3e\uae30 (//)\nxml.getNodeValue(\"//logDir\");\n\n// \ud2b9\uc815 \uc704\uce58\uc758 \ub178\ub4dc\nxml.getNodeValue(\"//users/user[1]/name\");  // \uccab \ubc88\uc9f8 user\uc758 name\nxml.getNodeValue(\"//users/user[2]/email\");  // \ub450 \ubc88\uc9f8 user\uc758 email\n```\n\n### \uc870\uac74\ubd80 \uc120\ud0dd\n\n```jsp\n// \uc18d\uc131\uc73c\ub85c \uc120\ud0dd\nxml.getNodeValue(\"//user[@id='user001']/name\");\n\n// \uac12\uc73c\ub85c \uc120\ud0dd\nxml.getNodeValue(\"//user[role='admin']/name\");\n```\n\n---\n\n## \uc2e4\uc804 \uc608\uc81c\n\n### 1. \uc124\uc815 \ud30c\uc77c \uc77d\uae30\n\n**config.xml**:\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<application>\n    <database>\n        <host>localhost</host>\n        <port>3306</port>\n        <name>myapp</name>\n        <user>dbuser</user>\n        <password>dbpass</password>\n    </database>\n    <email>\n        <smtp>smtp.gmail.com</smtp>\n        <port>587</port>\n        <user>admin@example.com</user>\n        <password>emailpass</password>\n    </email>\n</application>\n```\n\n**JSP**:\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/config.xml\");\n\n// \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc124\uc815 \uc77d\uae30\nString dbHost = xml.getNodeValue(\"//database/host\");\nString dbPort = xml.getNodeValue(\"//database/port\");\nString dbName = xml.getNodeValue(\"//database/name\");\nString dbUser = xml.getNodeValue(\"//database/user\");\n\nm.p(\"DB \uc811\uc18d: \" + dbUser + \"@\" + dbHost + \":\" + dbPort + \"/\" + dbName);\n\n// \uc774\uba54\uc77c \uc124\uc815 \uc77d\uae30\nString smtpHost = xml.getNodeValue(\"//email/smtp\");\nString smtpPort = xml.getNodeValue(\"//email/port\");\nString emailUser = xml.getNodeValue(\"//email/user\");\n\nm.p(\"SMTP: \" + smtpHost + \":\" + smtpPort + \" (\" + emailUser + \")\");\n\n%>\n```\n\n### 2. \uba54\ub274 \uad6c\uc870 \uc77d\uae30\n\n**menu.xml**:\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<menu>\n    <item>\n        <id>1</id>\n        <title>\ud648</title>\n        <url>/main/index.jsp</url>\n        <order>1</order>\n    </item>\n    <item>\n        <id>2</id>\n        <title>\uac8c\uc2dc\ud310</title>\n        <url>/board/list.jsp</url>\n        <order>2</order>\n    </item>\n    <item>\n        <id>3</id>\n        <title>\uacf5\uc9c0\uc0ac\ud56d</title>\n        <url>/notice/list.jsp</url>\n        <order>3</order>\n    </item>\n</menu>\n```\n\n**JSP**:\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/menu.xml\");\nDataSet menu = xml.getDataSet(\"//menu/item\");\n\np.setBody(\"main.menu\");\np.setLoop(\"menu\", menu);\np.display();\n\n%>\n```\n\n**HTML \ud15c\ud50c\ub9bf**:\n```html\n<nav>\n    <ul>\n        <!--@loop(menu)-->\n        <li><a href=\"{{menu.url}}\">{{menu.title}}</a></li>\n        <!--/loop(menu)-->\n    </ul>\n</nav>\n```\n\n### 3. \ub2e4\uad6d\uc5b4 \ub9ac\uc18c\uc2a4 \ud30c\uc77c\n\n**messages_ko.xml**:\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<messages>\n    <message>\n        <key>welcome</key>\n        <value>\ud658\uc601\ud569\ub2c8\ub2e4</value>\n    </message>\n    <message>\n        <key>login</key>\n        <value>\ub85c\uadf8\uc778</value>\n    </message>\n    <message>\n        <key>logout</key>\n        <value>\ub85c\uadf8\uc544\uc6c3</value>\n    </message>\n    <message>\n        <key>error.required</key>\n        <value>\ud544\uc218 \ud56d\ubaa9\uc785\ub2c8\ub2e4</value>\n    </message>\n</messages>\n```\n\n**JSP**:\n```jsp\n<%@ page contentType=\"text/html; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/messages_ko.xml\");\nDataSet messages = xml.getDataSet(\"//messages/message\");\n\n// \uba54\uc2dc\uc9c0 \ub9f5 \uc0dd\uc131\nDataMap msgMap = new DataMap();\nmessages.first();\nwhile(messages.next()) {\n    String key = messages.getString(\"key\");\n    String value = messages.getString(\"value\");\n    msgMap.put(key, value);\n}\n\n// \uc0ac\uc6a9\nm.p(msgMap.getString(\"welcome\"));  // \"\ud658\uc601\ud569\ub2c8\ub2e4\"\nm.p(msgMap.getString(\"login\"));    // \"\ub85c\uadf8\uc778\"\n\n%>\n```\n\n---\n\n## \ub514\ubc84\uae45\n\n### setDebug()\n\n\ud30c\uc2f1 \uacfc\uc815\uc744 \ucd9c\ub825\ud569\ub2c8\ub2e4.\n\n```jsp\nSimpleParser xml = new SimpleParser(Config.getDocRoot() + \"/data/sample.xml\");\nxml.setDebug(out);  // \ub514\ubc84\uadf8 \uc815\ubcf4 \ucd9c\ub825\n\nString value = xml.getNodeValue(\"//config/env/logDir\");\n```\n\n**\ucd9c\ub825 \ub0b4\uc6a9**:\n- XML \ud30c\uc77c \uacbd\ub85c\n- \ud30c\uc2f1 \uacb0\uacfc\n- XPath \ucffc\ub9ac \uc2e4\ud589 \uacfc\uc815\n\n---\n\n## XML \uc0dd\uc131\n\nMalgnFramework\ub294 XML \uc77d\uae30\uc5d0 \uc9d1\uc911\ub418\uc5b4 \uc788\uc9c0\ub9cc, \uac04\ub2e8\ud55c XML \uc0dd\uc131\uc740 \ubb38\uc790\uc5f4\ub85c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\n### \uc218\ub3d9 XML \uc0dd\uc131\n\n```jsp\n<%@ page contentType=\"text/xml; charset=utf-8\" %><%\n\nStringBuilder xml = new StringBuilder();\nxml.append(\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\");\nxml.append(\"<response>\\n\");\nxml.append(\"  <status>success</status>\\n\");\nxml.append(\"  <message>\ucc98\ub9ac \uc644\ub8cc</message>\\n\");\nxml.append(\"  <data>\\n\");\nxml.append(\"    <id>123</id>\\n\");\nxml.append(\"    <name>\").append(Malgn.escapeXml(\"\ud64d\uae38\ub3d9\")).append(\"</name>\\n\");\nxml.append(\"  </data>\\n\");\nxml.append(\"</response>\\n\");\n\nout.print(xml.toString());\n\n%>\n```\n\n### DataSet\uc744 XML\ub85c\n\n```jsp\n<%@ page contentType=\"text/xml; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nUserDao user = new UserDao();\nDataSet userList = user.query(\"WHERE status = 1\");\n\nStringBuilder xml = new StringBuilder();\nxml.append(\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\");\nxml.append(\"<users>\\n\");\n\nwhile(userList.next()) {\n    xml.append(\"  <user>\\n\");\n    xml.append(\"    <id>\").append(userList.getInt(\"id\")).append(\"</id>\\n\");\n    xml.append(\"    <name>\").append(Malgn.escapeXml(userList.getString(\"name\"))).append(\"</name>\\n\");\n    xml.append(\"    <email>\").append(Malgn.escapeXml(userList.getString(\"email\"))).append(\"</email>\\n\");\n    xml.append(\"  </user>\\n\");\n}\n\nxml.append(\"</users>\\n\");\nout.print(xml.toString());\n\n%>\n```\n\n---\n\n## JSON vs XML\n\n### JSON \uc0ac\uc6a9 (\uad8c\uc7a5)\n\n\ud604\ub300\uc801\uc778 \uc6f9 \uac1c\ubc1c\uc5d0\uc11c\ub294 JSON\uc774 \ub354 \uc120\ud638\ub429\ub2c8\ub2e4.\n\n```jsp\n<%@ page contentType=\"application/json; charset=utf-8\" %><%@ include file=\"/init.jsp\" %><%\n\nDataMap map = new DataMap();\nmap.put(\"id\", 123);\nmap.put(\"name\", \"\ud64d\uae38\ub3d9\");\nmap.put(\"email\", \"hong@example.com\");\n\nj.success(\"\uc870\ud68c \uc131\uacf5\", map);\n\n%>\n```\n\n**\ucd9c\ub825**:\n```json\n{\n  \"result\": \"success\",\n  \"message\": \"\uc870\ud68c \uc131\uacf5\",\n  \"data\": {\n    \"id\": 123,\n    \"name\": \"\ud64d\uae38\ub3d9\",\n    \"email\": \"hong@example.com\"\n  }\n}\n```\n\n### XML \uc0ac\uc6a9 (\ub808\uac70\uc2dc \uc2dc\uc2a4\ud15c \uc5f0\ub3d9)\n\nXML\uc740 \uc8fc\ub85c \ub808\uac70\uc2dc \uc2dc\uc2a4\ud15c\uc774\ub098 \ud2b9\uc815 \ud45c\uc900(SOAP \ub4f1)\uc744 \ub530\ub97c \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response>\n    <result>success</result>\n    <message>\uc870\ud68c \uc131\uacf5</message>\n    <data>\n        <id>123</id>\n        <name>\ud64d\uae38\ub3d9</name>\n        <email>hong@example.com</email>\n    </data>\n</response>\n```\n\n---\n\n## \uc8fc\uc694 \uba54\uc18c\ub4dc \uc815\ub9ac\n\n### SimpleParser\n\n| \uba54\uc18c\ub4dc | \uc124\uba85 |\n|--------|------|\n| SimpleParser(filePath) | XML \ud30c\uc77c \ub85c\ub4dc |\n| getNodeValue(xpath) | XPath\ub85c \ub2e8\uc77c \ub178\ub4dc \uac12 \uac00\uc838\uc624\uae30 |\n| getDataSet(xpath) | XPath\ub85c \uc5ec\ub7ec \ub178\ub4dc\ub97c DataSet\uc73c\ub85c |\n| setDebug(out) | \ub514\ubc84\uae45 \ubaa8\ub4dc \ud65c\uc131\ud654 |\n\n---\n\n## \ub2e4\uc74c \ub2e8\uacc4\n\n- [Excel \ucc98\ub9ac](excel.md)\ub85c \uc774\ub3d9\ud558\uc5ec \uc5d1\uc140 \ud30c\uc77c \uc77d\uae30/\uc4f0\uae30 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubcf4\uc138\uc694.\n\n---\n\n[\u2190 \uc774\uc804: DataSet \ud65c\uc6a9](dataset.md) | [\ubaa9\ucc28\ub85c \ub3cc\uc544\uac00\uae30](README.md) | [\ub2e4\uc74c: Excel \ucc98\ub9ac \u2192](excel.md)",
  "sections": [
    {
      "heading": "SimpleParser \ud074\ub798\uc2a4",
      "content": "XML \ud30c\uc2f1\uc744 \uc704\ud55c SimpleParser \ud074\ub798\uc2a4\uc758 \uc8fc\uc694 \uae30\ub2a5(XML \ud30c\uc2f1, XPath \uac80\uc0c9, DataSet \ubcc0\ud658)\uc744 \uc18c\uac1c\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "\uae30\ubcf8 \uc0ac\uc6a9\ubc95",
      "content": "XML \ud30c\uc77c \ub85c\ub4dc, \ub178\ub4dc \uac12 \uac00\uc838\uc624\uae30, \uc5ec\ub7ec \ub178\ub4dc\ub97c DataSet\uc73c\ub85c \ubcc0\ud658\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "XML \ud30c\uc77c \uc608\uc81c",
      "content": "sample.xml \uc608\uc81c\ub97c \ud1b5\ud574 XML \uad6c\uc870\ub97c \uc124\uba85\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "\uc8fc\uc694 \uba54\uc18c\ub4dc",
      "content": "getNodeValue()\uc640 getDataSet() \uba54\uc18c\ub4dc\uc758 \uc0ac\uc6a9\ubc95\uacfc \uc608\uc81c\ub97c \uc124\uba85\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "XPath \ud45c\ud604\uc2dd",
      "content": "\uc808\ub300 \uacbd\ub85c, // \uac80\uc0c9, \uc704\uce58 \uc9c0\uc815, \uc870\uac74\ubd80 \uc120\ud0dd \ub4f1 XPath \ud45c\ud604\uc2dd\uc744 \uc124\uba85\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "\uc2e4\uc804 \uc608\uc81c",
      "content": "\uc124\uc815 \ud30c\uc77c \uc77d\uae30, \uba54\ub274 \uad6c\uc870 \uc77d\uae30, \ub2e4\uad6d\uc5b4 \ub9ac\uc18c\uc2a4 \ud30c\uc77c \ub4f1\uc758 \uc2e4\uc804 \uc608\uc81c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "\ub514\ubc84\uae45",
      "content": "setDebug()\uc744 \uc0ac\uc6a9\ud55c \ud30c\uc2f1 \uacfc\uc815 \ub514\ubc84\uae45\uc744 \uc124\uba85\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "XML \uc0dd\uc131",
      "content": "\uc218\ub3d9 XML \uc0dd\uc131\uacfc DataSet\uc744 XML\ub85c \ubcc0\ud658\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "JSON vs XML",
      "content": "JSON(\uad8c\uc7a5)\uacfc XML(\ub808\uac70\uc2dc \uc2dc\uc2a4\ud15c \uc5f0\ub3d9)\uc758 \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\ub97c \ube44\uad50\ud569\ub2c8\ub2e4."
    },
    {
      "heading": "\uc8fc\uc694 \uba54\uc18c\ub4dc \uc815\ub9ac",
      "content": "SimpleParser \ud074\ub798\uc2a4\uc758 \uc8fc\uc694 \uba54\uc18c\ub4dc\ub97c \ud45c\ub85c \uc815\ub9ac\ud569\ub2c8\ub2e4."
    }
  ],
  "related_docs": ["dataset", "json", "database", "configuration", "template"],
  "related_classes": ["SimpleParser", "DataSet", "DataMap", "Config", "Malgn", "DataObject", "Page"]
}